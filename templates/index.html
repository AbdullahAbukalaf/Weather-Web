<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Weather Web</title>

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <!-- Bootstrap Icons (optional, used for a nicer UI) -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />

    <link rel="stylesheet" href="{{ url_for('static', path='css/styles.css') }}" />
  </head>
  <body>
    <nav class="navbar navbar-dark bg-transparent">
      <div class="container d-flex justify-content-between align-items-center">
        <a class="navbar-brand d-flex align-items-center gap-2" href="/">
          <i class="bi bi-cloud-sun fs-4"></i>
          <span class="fw-semibold">Weather Web</span>
        </a>
        <button id="themeToggle" class="btn btn-sm btn-outline-light rounded-pill">
          <i class="bi bi-moon-stars"></i>
          <span class="ms-1 d-none d-sm-inline">Dark</span>
        </button>
      </div>
    </nav>

    <main class="container py-4 py-md-5">
      <div
        class="row justify-content-center align-items-center"
        style="min-height: 70vh"
      >
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
          <div class="card glass shadow-lg border-0 rounded-4 fade-in-up">
            <div class="card-body p-4 p-md-5">
              <h1 class="h3 fw-bold text-center mb-4">
                <i class="bi bi-sunrise text-warning me-2 float-tilt"></i>
                Weather Fetcher
              </h1>

              <div class="d-flex flex-wrap gap-2 mb-3 justify-content-center">
                <button type="button" class="btn btn-outline-secondary chip" data-city="Amman">Amman</button>
                <button type="button" class="btn btn-outline-secondary chip" data-city="London">London</button>
                <button type="button" class="btn btn-outline-secondary chip" data-city="Tokyo">Tokyo</button>
                <button type="button" class="btn btn-outline-secondary chip" data-city="New York">New York</button>
              </div>

              <form
                action="/search"
                method="get"
                class="needs-validation"
                novalidate
              >
                <label for="city" class="form-label">City</label>
                <div class="input-group input-group-lg has-validation">
                  <span class="input-group-text bg-transparent"
                    ><i class="bi bi-geo-alt"></i
                  ></span>
                  <input
                    id="city"
                    type="text"
                    name="city"
                    class="form-control"
                    placeholder="City (e.g., Amman)"
                    value="{{ city or '' }}"
                    required
                    autocomplete="off"
                  />
                  <button class="btn btn-primary" type="submit" id="searchBtn">
                    <i class="bi bi-search me-1"></i> Search
                  </button>
                  <div class="invalid-feedback">Please enter a city name.</div>
                </div>
                <div class="row g-2 mt-2">
                  <div class="col-6 col-md-4">
                    <label class="form-label small" for="units">Units</label>
                    <select id="units" name="units" class="form-select form-select-sm">
                      <option value="metric" {% if units=='metric' %}selected{% endif %}>Metric (°C, m/s)</option>
                      <option value="imperial" {% if units=='imperial' %}selected{% endif %}>Imperial (°F, mph)</option>
                    </select>
                  </div>
                  <div class="col-6 col-md-4">
                    <label class="form-label small" for="days">Days</label>
                    <select id="days" name="days" class="form-select form-select-sm">
                      {% for n in range(1,17) %}
                        <option value="{{ n }}" {% if days==n %}selected{% endif %}>{{ n }}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="form-text mt-2">Type a city name and press Search.</div>
              </form>

              {% if current %}
              <hr />
              <h3 class="h5">Current</h3>
              <div class="row g-3">
                <div class="col-12 col-sm-6 col-md-3">
                  <div class="card border-0 shadow-sm">
                    <div class="card-body py-2">
                      <div class="small text-muted">Conditions</div>
                      <div class="fw-semibold">{{ current.emoji }} {{ current.text }}</div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-sm-6 col-md-3">
                  <div class="card border-0 shadow-sm">
                    <div class="card-body py-2">
                      <div class="small text-muted">Temperature ({{ unit_temp }})</div>
                      <div class="fw-semibold">{{ current.temp }}</div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-sm-6 col-md-3">
                  <div class="card border-0 shadow-sm">
                    <div class="card-body py-2">
                      <div class="small text-muted">Humidity</div>
                      <div class="fw-semibold">{{ current.humidity }}%</div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-sm-6 col-md-3">
                  <div class="card border-0 shadow-sm">
                    <div class="card-body py-2">
                      <div class="small text-muted">Wind ({{ unit_wind }})</div>
                      <div class="fw-semibold">{{ current.wind }}</div>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %} {% if daily and daily.dates %}
              <h3 class="h5 mt-3">Daily Forecast ({{ daily.dates|length }} days)</h3>
              <div class="table-responsive">
              <table class="table table-hover table-bordered align-middle mb-0">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Cond</th>
                    <th>Min ({{ unit_temp }})</th>
                    <th>Max ({{ unit_temp }})</th>
                    <th>Precip (mm)</th>
                  </tr>
                </thead>
                <tbody>
                  {% for i in range(daily.dates|length) %}
                  <tr>
                    <td>{{ daily.dates[i] }}</td>
                    <td title="{{ daily.text[i] }}">{{ daily.emoji[i] }}</td>
                    <td class="text-end">{{ daily.tmin[i] }}</td>
                    <td class="text-end">{{ daily.tmax[i] }}</td>
                    <td class="text-end">{{ daily.prec[i] }}</td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Bootstrap JS (Bundle includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="{{ url_for('static', path='js/main.js') }}"></script>
  </body>
</html>
